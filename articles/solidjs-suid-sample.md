---
title: "SolidJS ã§ Material-UIï¼ˆSUIDï¼‰ã‚’è©¦ã—ã¦ã¿ãŸ"
emoji: "ğŸ›·"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["solidjs", "typescript", "materialui", "supabase"]
published: true
---
æœ€è¿‘è©±é¡Œã«ãªã‚Šã¤ã¤ã‚ã‚‹ï¼ˆï¼Ÿï¼‰[SolidJS](https://www.solidjs.com/) å‘ã‘ã® Material-UI ãƒ©ã‚¤ãƒ–ãƒ©ãƒª **[SUID](https://suid.io/)** ã‚’å°‘ã—ã ã‘è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚

## SUID

https://suid.io/

React ç”¨ã® [MUI](https://mui.com/) ã‚’ SolidJS å‘ã‘ã« portï¼ˆç§»æ¤ï¼‰ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 0.2.0 ã§ã¯ 39 ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒç§»æ¤ã•ã‚Œã¦ã„ã¾ã™ã€‚

ãªãŠã€[SUID](https://suid.io/) ã®ã‚µã‚¤ãƒˆè‡ªä½“ãŒ SUID ã‚’ä½¿ã£ã¦ä½œæˆãƒ»æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

- **[SUID Docs](https://suid.io/getting-started/installation)**
- **[React MUI Getting started](https://mui.com/material-ui/getting-started/installation/)**

:::message
æ—¥æœ¬æ™‚é–“ã® 5/6 æœã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ 0.2.0 ã§ã¯å¯¾å¿œã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒ 3 ã¤ï¼ˆ[`Radio`](https://suid.io/components/radio-button)ãƒ»[`Table`](https://suid.io/components/table)ãƒ»[`Grow`](https://suid.io/components/grow)ï¼‰å¢—ãˆã¾ã—ãŸã€‚
:::

## è©¦ã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³

- SolidJS : 1.3.17
- SUID : 0.2.0
- supabase-js : 1.35.2

## è©¦ã—ãŸå†…å®¹

[Supabase](https://supabase.io/) ã® [Quickstart: SolidJS](https://supabase.com/docs/guides/with-solidjs) ã‚’ TypeScriptï¼ˆTSXï¼‰ã¨ Material-UI ã§ç½®ãæ›ãˆã¤ã¤ã€[Card](https://suid.io/components/card) è¡¨ç¤ºã‚‚è¿½åŠ ã§è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚

:::message
ä»Šå›ã¯ Supabase é–¢é€£éƒ¨åˆ†ã®å®Ÿè£…ã«ã¤ã„ã¦ã®èª¬æ˜ã¯çœç•¥ã—ã¾ã™ï¼ˆåˆ¥è¨˜äº‹ã§èª¬æ˜äºˆå®šï¼‰ã€‚
:::

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ï¼ˆå…¨ä½“ï¼‰

ã“ã¡ã‚‰ã«ç½®ã„ã¦ã‚ã‚Šã¾ã™ã€‚ã‚¿ã‚¤ãƒˆãƒ«ã®ã¨ãŠã‚Šã€2022/5/31 é–‹å‚¬äºˆå®šã® **[ç¬¬ 33 å› PostgreSQL ã‚¢ãƒ³ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ï¼ ã‚ªãƒ³ãƒ©ã‚¤ãƒ³](https://pgunconf.connpass.com/event/243796/)** å‘ã‘ã«ç”¨æ„ã—ãŸã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚

https://github.com/hmatsu47/pgunconf-sample-app

ã“ã“ã‹ã‚‰ã¯ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§ã®ä½¿ç”¨ä¾‹ã¨æ°—ã«ãªã£ãŸç‚¹ã‚’æŒ™ã’ã¦ã„ãã¾ã™ï¼ˆå½“ç„¶ã§ã™ãŒä»Šå¾Œã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼‰ã€‚

### `TextField`ï¼ˆãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰

#### ä½¿ç”¨ä¾‹

- [Auth.tsx](https://github.com/hmatsu47/pgunconf-sample-app/blob/0f9a19d8d7e90aa6929310dbee42ee7e26afa50e/src/Auth.tsx#L77)ï¼ˆ77 è¡Œç›®ã€œï¼‰

```tsx:Auth.tsxï¼ˆ77è¡Œç›®ã€œï¼‰
  <TextField
    required
    id="email"
    label="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"
    helperText="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    value={email()}
    onChange={(event, value) => {
      setEmail(value);
    }}
  />
```

`required`æŒ‡å®šã®å ´åˆã€æœªå…¥åŠ›ã§ Form ã‚’ Submit ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚¢ãƒ©ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚ãŸã ã— Submit ã‚’ä½¿ã‚ãªã„å ´åˆã¯ã€Œ*ã€å°ã®è¡¨ç¤ºã®ã¿ã§ãƒ–ãƒ­ãƒƒã‚¯å‹•ä½œãªã©ã¯ç”Ÿã˜ã¾ã›ã‚“ï¼ˆè‡ªå‰ã§ Validation ã‚’å®Ÿè£…ã™ã‚‹å¿…è¦ã‚ã‚Šï¼‰ã€‚

![](/images/solidjs-suid-sample/auth.png)

#### `inputRef`ã«å¯¾å¿œã—ã¦ã„ãªã„

React ã® MUI ã§ã¯`TextField`ã§`ref`ã®ä»£ã‚ã‚Šã«`inputRef`ãŒä½¿ãˆã¾ã™ãŒã€SUID ã§ã¯å¯¾å¿œã—ã¦ã„ãªã„ã‚ˆã†ã§ã™ã€‚

ä»Šå›ã¯ç”»é¢è¡¨ç¤ºç›´å¾Œã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã®æŒ‡å®šã«ä½¿ã„ãŸã‹ã£ãŸã®ã§ã™ãŒã€è«¦ã‚ã¦`document.getElementById()`ã‚’ä½¿ã£ã¦ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’ç§»å‹•ã—ã¾ã—ãŸã€‚

- [setFocus.ts](https://github.com/hmatsu47/pgunconf-sample-app/blob/0f9a19d8d7e90aa6929310dbee42ee7e26afa50e/src/commons/setFocus.ts#L3)ï¼ˆ3 è¡Œç›®ã€œï¼‰

```typescript:setFocus.tsï¼ˆ3è¡Œç›®ã€œï¼‰
  const element = document.getElementById(elementId);
  element?.focus();
```

- [Auth.tsx](https://github.com/hmatsu47/pgunconf-sample-app/blob/0f9a19d8d7e90aa6929310dbee42ee7e26afa50e/src/Auth.tsx#L18)ï¼ˆ18 è¡Œç›®ã€œï¼‰

```tsx:Auth.tsxï¼ˆ18è¡Œç›®ã€œï¼‰
  onMount(() => {
    setFocus('email');
  })
```

#### `multiline`ã«å¯¾å¿œã—ã¦ã„ãªã„

SUID ã§ã¯ç¾çŠ¶[`TextareaAutosize`](https://mui.com/material-ui/react-textarea-autosize/)ã«å¯¾å¿œã—ã¦ã„ãªã„ã®ã§ä»£ã‚ã‚Šã«`TextField`ã§ [Multiline](https://mui.com/material-ui/react-text-field/#multiline) ã‚’ä½¿ãŠã†ã¨æ€ã£ãŸã®ã§ã™ãŒã€`multiline`ãƒ»`row`ãªã©ã«ã¯å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚

ä»•æ–¹ãªãé€šå¸¸ã®`textarea`ã‚¿ã‚°ã‚’ä½¿ã„ã¾ã—ãŸã€‚

- [EditItem.tsx](https://github.com/hmatsu47/pgunconf-sample-app/blob/a5564014f98b3181132b6f707cad7627a073debd/src/EditItem.tsx#L157)ï¼ˆ157 è¡Œç›®ã€œï¼‰

```tsx:EditItem.tsxï¼ˆ157è¡Œç›®ã€œï¼‰
  <textarea
    id="note"
    aria-label="Note"
    placeholder="æœ¬æ–‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    onchange={(event) => {
      setNote(event.currentTarget.value);
    }}
    style="width: 100%; height: 9.0em; font-size: 1rem; line-height: 1.8em"
  >
    {note()}
  </textarea>
```

### `Card`ï¼ˆã‚«ãƒ¼ãƒ‰è¡¨ç¤ºï¼‰

#### ä½¿ç”¨ä¾‹

- [ViewItem.tsx](https://github.com/hmatsu47/pgunconf-sample-app/blob/a5564014f98b3181132b6f707cad7627a073debd/src/ViewItem.tsx#L35)ï¼ˆ35 è¡Œç›®ã€œï¼‰

```tsx:ViewItem.tsxï¼ˆ35è¡Œç›®ã€œï¼‰
  <Card
    id="itemCard"
    variant="outlined"
  >
    <CardContent>
      <Stack
        spacing={1}
        direction="row"
      >
        <CardActions sx={{ padding: 0 }}>
          <IconButton
            onClick={() => toggleExpand()}
            sx={{ padding: 0 }}
          >
            <Switch fallback={<></>}>
              <Match when={!expand()}>
                <ExpandMoreIcon aria-label="expand more"/>
              </Match>
              <Match when={expand()}>
                <ExpandLessIcon aria-label="expand less"/>
              </Match>
            </Switch>
          </IconButton>
        </CardActions>
        <Typography
          variant="h6"
          gutterBottom
        >
          {props.article.title}
        </Typography>
ï¼ˆä¸­ç•¥ï¼‰
      </Stack>
      <Show
        when={expand()}
        fallback={<></>}
      >
        <For
          each={props.article.note?.split('\n')}
          fallback={<></>}
        >
          {(line) =>
            <Typography
              variant="body1"
              gutterBottom
            >
              {line}
            </Typography>
          }
        </For>
      </Show>
      <CardActions sx={{ padding: 0 }}>
        <IconButton
          aria-label="edit"
          onClick={() => props.setArticle(props.article)}
          disabled={
            props.article.userId !== props.session.user!.id && props.article.noteType !== NoteType.Writable
          }
        >
          <EditIcon />
        </IconButton>
ï¼ˆä¸­ç•¥ï¼‰
      </CardActions>
    </CardContent>
  </Card>
```

![](/images/solidjs-suid-sample/list.png)

â€» ã€Œæ–°è¦æŠ•ç¨¿ã€ã®ä¸‹ã‹ã‚‰ç¶šãã‚«ãƒ¼ãƒ‰ã§ã™ã€‚ãªãŠã€Œæ–°è¦æŠ•ç¨¿ã€ã‚‚`Card`ã§è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚

#### `Collapse`API ã«å¯¾å¿œã—ã¦ã„ãªã„

React ç”¨ MUI ã«ã‚ã‚‹ [Collapse API](https://mui.com/material-ui/api/collapse/) ã«å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€ä¸Šã«è¨˜ã—ãŸã‚³ãƒ¼ãƒ‰ã§ã‚‚ SolidJS è‡ªä½“ãŒæŒã¤ [Show API](https://www.solidjs.com/docs/latest/api#%3Cshow%3E) ã‚’ä½¿ã£ã¦é¡ä¼¼ã®å‡¦ç†ã‚’ã—ã¦ã„ã¾ã™ï¼ˆCollapse API ã¨ã¯é•ã„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å‹•ä½œã¯ã—ã¾ã›ã‚“ï¼‰ã€‚

```tsx:ViewItem.tsxï¼ˆ49è¡Œç›®ã€œï¼šå±•é–‹ãƒœã‚¿ãƒ³éƒ¨åˆ†ï¼‰
  <Switch fallback={<></>}>
    <Match when={!expand()}>
      <ExpandMoreIcon aria-label="expand more"/>
    </Match>
    <Match when={expand()}>
      <ExpandLessIcon aria-label="expand less"/>
    </Match>
  </Switch>
```

```tsx:ViewItem.tsxï¼ˆ82è¡Œç›®ã€œï¼šå®Ÿéš›ã«å±•é–‹ã™ã‚‹éƒ¨åˆ†ï¼‰
  <Show
    when={expand()}
    fallback={<></>}
  >
    <For
      each={props.article.note?.split('\n')}
      fallback={<></>}
    >
      {(line) =>
        <Typography
          variant="body1"
          gutterBottom
        >
          {line}
        </Typography>
      }
    </For>
  </Show>
```

## ä½¿ã£ã¦ã¿ãŸæ„Ÿæƒ³

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 0.2.0 ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€ã¾ã¨ã‚‚ãªãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’ä½œã‚‹ã«ã¯è¶³ã‚Šãªã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ»API ãŒã¾ã å°‘ãªããªã„å°è±¡ã§ã™ã€‚

ä»Šå¾Œã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã«æœŸå¾…ã€ã§ã™ã­ã€‚

## å‚è€ƒï¼šãã®ä»–ã®ã‚µãƒ³ãƒ—ãƒ«ç”»é¢

### ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ç”»é¢

![](/images/solidjs-suid-sample/account.png)
